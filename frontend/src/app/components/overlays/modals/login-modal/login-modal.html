<app-modal-shell [modalId]="'sign-in-modal'" [title]="'Sign In'">
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
    <div class="space-y-4">
      @if (errorMessage) {
        <div class="p-4 bg-error/10 border border-error rounded-lg text-error text-sm">
          {{ errorMessage }}
        </div>
      }

      <app-form-input
        [control]="loginForm.controls.usernameOrEmail"
        label="Username or Email"
        placeholder="Enter your username or email"
        inputId="username-or-email"
        [icon]="MailIcon"
        [error]="getUsernameOrEmailError()"
        [required]="true"
      />

      <app-form-input
        [control]="loginForm.controls.password"
        label="Password"
        placeholder="Enter your password"
        inputId="password"
        type="password"
        [icon]="LockIcon"
        [error]="getPasswordError()"
        [required]="true"
      />

      <button
        type="submit"
        [disabled]="!loginForm.valid || isLoading"
        class="w-full py-2.5 px-4 inline-flex items-center justify-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-primary text-white hover:opacity-90 focus:outline-hidden disabled:opacity-50 disabled:pointer-events-none"
      >
        @if (isLoading) {
          <span>Signing in...</span>
        } @else {
          <span>Sign In</span>
        }
      </button>
    </div>
  </form>
  <app-anchor
    label="Register"
    routerLink="/register"
    [overlayTarget]="'#sign-in-modal'"
  />
</app-modal-shell>
